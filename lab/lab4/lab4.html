<!DOCTYPE html>
<html>
<head>
  <title>Тестування</title>
</head>
<body>
<form id="quizForm" onsubmit="return false;">
  <h2>Тестування</h2>

  <p>Питання 1: Яка столиця України?</p>
  <input type="radio" name="q1" value="1" id="q1a1"> <label for="q1a1">Київ</label><br>
  <input type="radio" name="q1" value="0" id="q1a2"> <label for="q1a2">Москва</label><br>
  <input type="radio" name="q1" value="1" id="q1a3"> <label for="q1a3">Варшава</label><br>
  <input type="radio" name="q1" value="0" id="q1a4"> <label for="q1a4">Мінськ</label><br>

  <!-- ... (other questions and options) ... -->

  <p>Питання 3: Оберіть домашніх улюбленців:</p>
  <select id="q3" multiple>
    <option value="1">Кіт</option>
    <option value="1">Пес</option>
    <option value="0">Крокодил</option>
    <option value="0">Корова</option>
  </select>

  <!-- ... (other questions and options) ... -->

  <button onclick="calculateScore()">Закінчити тест</button>
</form>

<div id="results">
  <h2>Результати</h2>
  <table>
    <tr>
      <th>Питання</th>
      <th>Обрані відповіді</th>
      <th>Бали</th>
    </tr>
  </table>
  <p>Загальний бал: <span id="totalScore"></span></p>
</div>

<script>
function calculateScore() {
  let totalScore = 0;
  const resultsTable = document.querySelector('#results table');
  resultsTable.innerHTML = '';

  const questions = document.querySelectorAll('form[id=quizForm] > p');
  questions.forEach((question, index) => {
    const questionText = question.textContent;
    let selectedAnswers = '';
    let score = 0;

    if (question.nextElementSibling.type === 'radio') {
      const selectedOption = document.querySelector(`input[name=q${index + 1}]:checked`);
      if (selectedOption) {
        selectedAnswers = selectedOption.nextSibling.textContent;
        score = parseFloat(selectedOption.value);
      }
    } else if (question.nextElementSibling.type === 'checkbox') {
      const selectedCheckboxes = document.querySelectorAll(`input[name=q${index + 1}]:checked`);
      selectedCheckboxes.forEach((checkbox) => {
        selectedAnswers += checkbox.nextSibling.textContent + ', ';
        score += parseFloat(checkbox.value);
      });
    } else if (question.nextElementSibling.tagName === 'SELECT') {
      const selectedOptions = document.getElementById(`q${index + 1}`).selectedOptions;
      selectedAnswers = [...selectedOptions].map((option) => option.text).join(', ');

      // Updated logic for Question 3 (pets) and Question 6 (history)
      if (index + 1 === 3 || index + 1 === 6) {
        let correctAnswers = 0;
        selectedOptions.forEach((option) => {
          if (option.value === '1') {
            correctAnswers++;
          }
        });

        // Check if exactly 2 correct answers were chosen
        if (correctAnswers === 2) {
          score = 2;
        } else {
          score = 0;
        }
      } else {
        score = 0; 
      }
    } else if (question.nextElementSibling.type === 'text') {
      selectedAnswers = question.nextElementSibling.value;
      const correctAnswer = "Амазонка"; 
      if (selectedAnswers.toLowerCase() === correctAnswer.toLowerCase()) {
        score = 1;
      }
    }


    totalScore += score;
    const newRow = resultsTable.insertRow(-1);
    const cell1 = newRow.insertCell(0);
    const cell2 = newRow.insertCell(1);
    const cell3 = newRow.insertCell(2);

    cell1.innerHTML = questionText;
    cell2.innerHTML = selectedAnswers;
    cell3.innerHTML = score;
  });

  document.getElementById('totalScore').textContent = totalScore;
}
</script>
</body>
</html>
