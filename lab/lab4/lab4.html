<!DOCTYPE html>
<html>
<head>
  <title>Тестування</title>
</head>
<body>
<form id="quizForm" onsubmit="return false;">
  <h2>Тестування</h2>

  <p>Питання 1: Яка столиця України?</p>
  <input type="radio" name="q1" value="1" id="q1a1"> <label for="q1a1">Київ</label><br>
  <input type="radio" name="q1" value="0" id="q1a2"> <label for="q1a2">Москва</label><br>
  <input type="radio" name="q1" value="1" id="q1a3"> <label for="q1a3">Варшава</label><br>
  <input type="radio" name="q1" value="0" id="q1a4"> <label for="q1a4">Мінськ</label><br>

  <p>Питання 2: Оберіть фрукти:</p>
  <input type="checkbox" name="q2" value="1" id="q2a1"> <label for="q2a1">Яблуко</label><br>
  <input type="checkbox" name="q2" value="1" id="q2a2"> <label for="q2a2">Апельсин</label><br>
  <input type="checkbox" name="q2" value="0" id="q2a3"> <label for="q2a3">Ананас</label><br>
  <input type="checkbox" name="q2" value="0" id="q2a4"> <label for="q2a4">Картопля</label><br>

  <p>Питання 3: Оберіть домашніх улюбленців:</p>
  <select id="q3" multiple>
    <option value="1">Кіт</option>
    <option value="1">Пес</option>
    <option value="0">Крокодил</option>
    <option value="0">Корова</option>
  </select>

  <p>Питання 4: Які з цих міст є столицями країн?</p>
  <input type="checkbox" name="q4" value="1" id="q4a1"> <label for="q4a1">Вашингтон</label><br>
  <input type="checkbox" name="q4" value="0" id="q4a2"> <label for="q4a2">Херсон</label><br>
  <input type="checkbox" name="q4" value="1" id="q4a3"> <label for="q4a3">Лондон</label><br>
  <input type="checkbox" name="q4" value="0" id="q4a4"> <label for="q4a4">Нью-Йорк</label><br>

  <p>Питання 5: Яка найдовша річка в світі?</p>
  <input type="text" id="q5">

  <p>Питання 6: Що вивчають в історії?</p>
  <select id="q6" multiple>
    <option value="1">Події минулого</option>
    <option value="1">Життя видатних осіб</option>
    <option value="0">Розвиток інтернет-технологій</option>
    <option value="0">Кулінарію</option>
  </select>

  <p>Питання 7: Яка мова є найпоширенішою в світі?</p>
  <input type="radio" name="q7" value="1" id="q7a1"> <label for="q7a1">Англійська</label><br>
  <input type="radio" name="q7" value="0" id="q7a2"> <label for="q7a2">Іспанська</label><br>
  <input type="radio" name="q7" value="0" id="q7a3"> <label for="q7a3">Китайська</label><br>
  <input type="radio" name="q7" value="0" id="q7a4"> <label for="q7a4">Російська</label><br>

  <button onclick="calculateScore()">Закінчити тест</button>
</form>

<div id="results">
  <h2>Результати</h2>
  <table>
    <tr>
      <th>Питання</th>
      <th>Обрані відповіді</th>
      <th>Бали</th>
    </tr>
    <!-- Результати будуть відображені тут -->
  </table>
  <p>Загальний бал: <span id="totalScore"></span></p>
</div>

<script>
function calculateScore() {
  let totalScore = 0;
  const resultsTable = document.querySelector('#results table');
  resultsTable.innerHTML = '';

  const questions = document.querySelectorAll('form[id=quizForm] > p');
  questions.forEach((question, index) => {
    const questionText = question.textContent;
    let selectedAnswers = '';
    let score = 0;

    if (question.nextElementSibling.type === 'radio') {
      const selectedOption = document.querySelector(`input[name=q${index + 1}]:checked`);
      if (selectedOption) {
        selectedAnswers = selectedOption.nextSibling.textContent;
        score = parseFloat(selectedOption.value);
      }
    } else if (question.nextElementSibling.type === 'checkbox') {
      const selectedCheckboxes = document.querySelectorAll(`input[name=q${index + 1}]:checked`);
      selectedCheckboxes.forEach((checkbox) => {
        selectedAnswers += checkbox.nextSibling.textContent + ', ';
        score += parseFloat(checkbox.value);
      });
      if (selectedCheckboxes.length > 2) {
        score = 0; // Якщо обрано більше ніж 2 варіанти, оцінка 0.
      }
    } else if (question.nextElementSibling.tagName === 'SELECT') {
      const selectedOptions = document.getElementById(`q${index + 1}`).selectedOptions;
      selectedAnswers = [...selectedOptions].map((option) => option.text).join(', ');
      if (selectedOptions.length === 2) {
        let correctAnswers = 0;
        selectedOptions.forEach((option) => {
          if (option.value === '1') {
            correctAnswers++;
          }
        });
        if (correctAnswers === 2) {
          score = 2;
        } else if (correctAnswers === 1) {
          score = 1;
        } else {
          score = 0;
        }
      } else {
        score = 0; // Якщо обрано не 2 варіанти, оцінка 0.
      }
    } else if (question.nextElementSibling.type === 'text') {
      selectedAnswers = question.nextElementSibling.value;
      const correctAnswer = "Амазонка"; // Правильна відповідь
      if (selectedAnswers.toLowerCase() === correctAnswer.toLowerCase()) {
        score = 1;
      }
    }

    totalScore += score;
    const newRow = resultsTable.insertRow(-1);
    const cell1 = newRow.insertCell(0);
    const cell2 = newRow.insertCell(1);
    const cell3 = newRow.insertCell(2);

    cell1.innerHTML = questionText;
    cell2.innerHTML = selectedAnswers;
    cell3.innerHTML = score;
  });

  document.getElementById('totalScore').textContent = totalScore;
}
</script>
</body>
</html>
